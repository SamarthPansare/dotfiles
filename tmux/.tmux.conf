# Set prefix to Ctrl-a
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Set base index to 1
set-option -g base-index 1
setw -g pane-base-index 1

set-option -g status-bg "#66cc66"

# Status bar customization
set-option -g status-left-length 50
set-option -g status-right-length 50

# Session name with different background color and no truncation
set-option -g status-left "#[bg=#2d3748,fg=#ffffff,bold] #S #[bg=#66cc66,fg=#2d3748] "

# Enable mouse
set-option -g mouse on

set -g default-terminal "xterm-256color"

# =============================================================================
# Clipboard Integration (X11 - xclip)
# =============================================================================
# Enable copy-paste system-wide
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "xclip -selection clipboard -i"
# Copy to system clipboard with mouse
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "xclip -selection clipboard -i"
# Use vi-style keys for copy-mode
set-option -g mode-keys vi

# Middle-click to paste from system clipboard
bind-key -T root MouseDown2Pane run-shell "xclip -selection clipboard -o | tmux load-buffer - && tmux paste-buffer"

# Automatically enter copy mode on mouse drag
bind-key -T root MouseDrag1Pane if-shell -F "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -M"

# =============================================================================
# Clipboard Integration (Wayland - wl-copy)
# Uncomment below and comment xclip lines above if xclip doesn't work in Wayland
# =============================================================================
# bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "wl-copy"
# bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "wl-copy"
# bind-key -T root MouseDown2Pane run-shell "wl-paste | tmux load-buffer - && tmux paste-buffer"


# Plugins using TPM
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-boot 'on'
set -g @continuum-restore 'on'

# Initialize TMUX plugin manager (install TPM: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm)
# After adding new plugins, press prefix + I (Ctrl-a + I) to install them
run '~/.tmux/plugins/tpm/tpm'